name: ğŸ” Redeploy Vercel (Manual)

on:
  workflow_dispatch:

jobs:
  redeploy:
    name: ğŸš€ Trigger Vercel Redeploy
    runs-on: ubuntu-latest

    steps:
    - name: âšª Checkout repository
      uses: actions/checkout@v4

    - name: ğŸ” Call Vercel redeploy hook
      run: |
        curl -X POST \
        -H "Content-Type: application/json" \
        -d '{"force": true}' \
        "https://api.vercel.com/v1/integrations/deploy/${{ secrets.VERCEL_DEPLOY_HOOK }}"

    - name: ğŸ”” Notify Discord
      if: always()
      run: |
        JSON=$(jq -n \
          --arg msg "ğŸ” Vercel redeploy triggered manually." \
          '{content: $msg}' )

        curl -s \
        -H "Content-Type: application/json" \
        -d "$JSON" \
        "${{ secrets.DISCORD_WEBHOOK_URL }}"
